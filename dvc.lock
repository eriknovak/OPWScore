schema: '2.0'
stages:
  test:
    cmd: python scripts/models/performance_test.py en,cs,de,et,fi,ru,tr,zh wmt18
    deps:
    - path: data/raw/wmt18/2018-da.csv
      md5: 7d291d112e5c59bc8c9437de464af7d5
      size: 92523054
    - path: results/weight_stores/weight_store.cs.wmt17.bert-base-multilingual-cased.pickle
      md5: de28f2be923c93c8f4a6bda5107ffc16
      size: 231663
    - path: results/weight_stores/weight_store.cs.wmt17.roberta-large-mnli.pickle
      md5: 8ae9fd1bffbc960085cc2be2c620ae98
      size: 139698
    - path: results/weight_stores/weight_store.de.wmt17.bert-base-multilingual-cased.pickle
      md5: 590755a920545336ce492d2ab30a2450
      size: 307909
    - path: results/weight_stores/weight_store.de.wmt17.roberta-large-mnli.pickle
      md5: 9fbb9231d2a8bd9e0e3824ca9da85d67
      size: 185669
    - path: results/weight_stores/weight_store.en.wmt17.bert-base-multilingual-cased.pickle
      md5: 5fe385307672f0e00cfc37ad940d676c
      size: 501819
    - path: results/weight_stores/weight_store.en.wmt17.roberta-large-mnli.pickle
      md5: 0631df416cdac44b43e0f306fa54e95a
      size: 661635
    - path: results/weight_stores/weight_store.et.wmt17.bert-base-multilingual-cased.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.et.wmt17.roberta-large-mnli.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.fi.wmt17.bert-base-multilingual-cased.pickle
      md5: 054063b16d9ad2925675c21c681c1717
      size: 220481
    - path: results/weight_stores/weight_store.fi.wmt17.roberta-large-mnli.pickle
      md5: 57ff52d08d2d43566c6ba21480b01077
      size: 135501
    - path: results/weight_stores/weight_store.ru.wmt17.bert-base-multilingual-cased.pickle
      md5: f8393ff5e498ff07158978920d6c2701
      size: 281390
    - path: results/weight_stores/weight_store.ru.wmt17.roberta-large-mnli.pickle
      md5: c42e72dee7164f5394a25839f943f7f2
      size: 30211
    - path: results/weight_stores/weight_store.tr.wmt17.bert-base-multilingual-cased.pickle
      md5: 4b1feff650d96ed186f9299867e9a6a7
      size: 155562
    - path: results/weight_stores/weight_store.tr.wmt17.roberta-large-mnli.pickle
      md5: 427ec8fd3b5d233cb20b4cb12b589a9c
      size: 103643
    - path: results/weight_stores/weight_store.zh.wmt17.bert-base-multilingual-cased.pickle
      md5: 5c59bdfdd43f12e024532e40011b8630
      size: 97301
    - path: results/weight_stores/weight_store.zh.wmt17.roberta-large-mnli.pickle
      md5: a227ab5832c20b807bde09da4c1c1363
      size: 29881
    - path: scripts/models/performance_test.py
      md5: 4353a6c9bdb72e0e6b5f077573eb9cc6
      size: 1518
    - path: src/models/model.py
      md5: c1cdd773d8d6bbfe369b0d867d6cb194
      size: 11531
    params:
      params.yaml:
        model.distance: seq
        model.nit: 100
        model.reg1: 0.01
        model.reg2: None
        model.temporal_type: TCOT
        model.weight_dist: uniform
    outs:
    - path: results/wmt18/correlations/scores.cs-en.json
      md5: 50c58d4c108a974d46ecd3b565195516
      size: 738116
    - path: results/wmt18/correlations/scores.de-en.json
      md5: af1be9ec85499881a42e1efce5162453
      size: 2410635
    - path: results/wmt18/correlations/scores.en-cs.json
      md5: b94119c321cf37e4d3669f03047561d4
      size: 643613
    - path: results/wmt18/correlations/scores.en-de.json
      md5: 3bbee291534d378073221928117091a2
      size: 860740
    - path: results/wmt18/correlations/scores.en-et.json
      md5: 849a31a5007ff853b78f2e790ca5cdce
      size: 1124558
    - path: results/wmt18/correlations/scores.en-fi.json
      md5: 39d5d27c7b939d5df6d15d9af6a8c1f9
      size: 680867
    - path: results/wmt18/correlations/scores.en-ru.json
      md5: a6f9f0b81fef7447a026f375aa755111
      size: 1422923
    - path: results/wmt18/correlations/scores.en-tr.json
      md5: 877d63b355b83fb5b0950462041131f1
      size: 263268
    - path: results/wmt18/correlations/scores.en-zh.json
      md5: bce13af60af1997f7abb55f3e1c137ab
      size: 1867852
    - path: results/wmt18/correlations/scores.et-en.json
      md5: 5a87301b355293ae43caa48a6c0721cc
      size: 1729786
    - path: results/wmt18/correlations/scores.fi-en.json
      md5: 69e9f7a3558a1544adea809c34a9ad44
      size: 1260579
    - path: results/wmt18/correlations/scores.ru-en.json
      md5: 25ddba666261aec983777424f6f3219f
      size: 1111829
    - path: results/wmt18/correlations/scores.tr-en.json
      md5: 7ce16436722fd29bb691c8c341a0aa40
      size: 1086944
    - path: results/wmt18/correlations/scores.zh-en.json
      md5: 7f11d7eac113294d249a5f8723531cd1
      size: 2138716
  evaluate:
    cmd: python scripts/models/performance_eval.py wmt18
    deps:
    - path: results/wmt18/correlations/scores.cs-en.json
      md5: 50c58d4c108a974d46ecd3b565195516
      size: 738116
    - path: results/wmt18/correlations/scores.de-en.json
      md5: af1be9ec85499881a42e1efce5162453
      size: 2410635
    - path: results/wmt18/correlations/scores.en-cs.json
      md5: b94119c321cf37e4d3669f03047561d4
      size: 643613
    - path: results/wmt18/correlations/scores.en-de.json
      md5: 3bbee291534d378073221928117091a2
      size: 860740
    - path: results/wmt18/correlations/scores.en-et.json
      md5: 849a31a5007ff853b78f2e790ca5cdce
      size: 1124558
    - path: results/wmt18/correlations/scores.en-fi.json
      md5: 39d5d27c7b939d5df6d15d9af6a8c1f9
      size: 680867
    - path: results/wmt18/correlations/scores.en-ru.json
      md5: a6f9f0b81fef7447a026f375aa755111
      size: 1422923
    - path: results/wmt18/correlations/scores.en-tr.json
      md5: 877d63b355b83fb5b0950462041131f1
      size: 263268
    - path: results/wmt18/correlations/scores.en-zh.json
      md5: bce13af60af1997f7abb55f3e1c137ab
      size: 1867852
    - path: results/wmt18/correlations/scores.et-en.json
      md5: 5a87301b355293ae43caa48a6c0721cc
      size: 1729786
    - path: results/wmt18/correlations/scores.fi-en.json
      md5: 69e9f7a3558a1544adea809c34a9ad44
      size: 1260579
    - path: results/wmt18/correlations/scores.ru-en.json
      md5: 25ddba666261aec983777424f6f3219f
      size: 1111829
    - path: results/wmt18/correlations/scores.tr-en.json
      md5: 7ce16436722fd29bb691c8c341a0aa40
      size: 1086944
    - path: results/wmt18/correlations/scores.zh-en.json
      md5: 7f11d7eac113294d249a5f8723531cd1
      size: 2138716
    - path: scripts/models/performance_eval.py
      md5: a34ab4120606ac0ecac6472322256c88
      size: 2229
    outs:
    - path: results/wmt18/correlations/scores/eval.wmt18.cs-en.json
      md5: c5acfedbb929abdccd1b8a8a1839d884
      size: 104
    - path: results/wmt18/correlations/scores/eval.wmt18.de-en.json
      md5: 9a532099a854b64985e3899b382abd7b
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.en-cs.json
      md5: 5d2ffb72352f8b9dd0b355da9154a97e
      size: 104
    - path: results/wmt18/correlations/scores/eval.wmt18.en-de.json
      md5: c7aceb2ec6806ea1d826411cba78560f
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.en-et.json
      md5: 7930f67b6f53895443c1de35d8c750f2
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.en-fi.json
      md5: 4c993ae7b49f4548ed7442415d076540
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.en-ru.json
      md5: 985b6c846ed317ae58ea09b0838a40e9
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.en-tr.json
      md5: 0071498e48f1fa6fb68e2875d5d6599c
      size: 104
    - path: results/wmt18/correlations/scores/eval.wmt18.en-zh.json
      md5: eb875039c1d8e102a97830bb79bbb1f3
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.et-en.json
      md5: 4e7ae1407f2a3a28ea4feda7c856c3ba
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.fi-en.json
      md5: 6eae0ee7a9325e6aac8934d9ec6f41ba
      size: 104
    - path: results/wmt18/correlations/scores/eval.wmt18.ru-en.json
      md5: bf42b0a627649a02a245795c90b5e70d
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.tr-en.json
      md5: 87f0c0c15659e5b2589935993ed69e1d
      size: 104
    - path: results/wmt18/correlations/scores/eval.wmt18.zh-en.json
      md5: 3d7768f0097f7662dee1a90736919186
      size: 103
  data_prep:
    cmd: python scripts/models/compute_weights.py en,cs,de,et,fi,ru,tr,zh
    deps:
    - path: scripts/models/compute_weights.py
      md5: d9154ddad9c15a57404204881f44013f
      size: 1924
    outs:
    - path: results/weight_stores/weight_store.cs.wmt17.bert-base-multilingual-cased.pickle
      md5: de28f2be923c93c8f4a6bda5107ffc16
      size: 231663
    - path: results/weight_stores/weight_store.cs.wmt17.roberta-large-mnli.pickle
      md5: 8ae9fd1bffbc960085cc2be2c620ae98
      size: 139698
    - path: results/weight_stores/weight_store.de.wmt17.bert-base-multilingual-cased.pickle
      md5: 590755a920545336ce492d2ab30a2450
      size: 307909
    - path: results/weight_stores/weight_store.de.wmt17.roberta-large-mnli.pickle
      md5: 9fbb9231d2a8bd9e0e3824ca9da85d67
      size: 185669
    - path: results/weight_stores/weight_store.en.wmt17.bert-base-multilingual-cased.pickle
      md5: 5fe385307672f0e00cfc37ad940d676c
      size: 501819
    - path: results/weight_stores/weight_store.en.wmt17.roberta-large-mnli.pickle
      md5: 0631df416cdac44b43e0f306fa54e95a
      size: 661635
    - path: results/weight_stores/weight_store.et.wmt17.bert-base-multilingual-cased.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.et.wmt17.roberta-large-mnli.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.fi.wmt17.bert-base-multilingual-cased.pickle
      md5: 054063b16d9ad2925675c21c681c1717
      size: 220481
    - path: results/weight_stores/weight_store.fi.wmt17.roberta-large-mnli.pickle
      md5: 57ff52d08d2d43566c6ba21480b01077
      size: 135501
    - path: results/weight_stores/weight_store.ru.wmt17.bert-base-multilingual-cased.pickle
      md5: f8393ff5e498ff07158978920d6c2701
      size: 281390
    - path: results/weight_stores/weight_store.ru.wmt17.roberta-large-mnli.pickle
      md5: c42e72dee7164f5394a25839f943f7f2
      size: 30211
    - path: results/weight_stores/weight_store.tr.wmt17.bert-base-multilingual-cased.pickle
      md5: 4b1feff650d96ed186f9299867e9a6a7
      size: 155562
    - path: results/weight_stores/weight_store.tr.wmt17.roberta-large-mnli.pickle
      md5: 427ec8fd3b5d233cb20b4cb12b589a9c
      size: 103643
    - path: results/weight_stores/weight_store.zh.wmt17.bert-base-multilingual-cased.pickle
      md5: 5c59bdfdd43f12e024532e40011b8630
      size: 97301
    - path: results/weight_stores/weight_store.zh.wmt17.roberta-large-mnli.pickle
      md5: a227ab5832c20b807bde09da4c1c1363
      size: 29881
