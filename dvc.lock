schema: '2.0'
stages:
  test:
    cmd: python scripts/models/performance_test.py en,cs,de,et,fi,ru,tr,zh wmt18
    deps:
    - path: results/weight_stores/weight_store.cs.wmt17.bert-base-multilingual-cased.pickle
      md5: de28f2be923c93c8f4a6bda5107ffc16
      size: 231663
    - path: results/weight_stores/weight_store.cs.wmt17.roberta-large-mnli.pickle
      md5: 8ae9fd1bffbc960085cc2be2c620ae98
      size: 139698
    - path: results/weight_stores/weight_store.de.wmt17.bert-base-multilingual-cased.pickle
      md5: 590755a920545336ce492d2ab30a2450
      size: 307909
    - path: results/weight_stores/weight_store.de.wmt17.roberta-large-mnli.pickle
      md5: 9fbb9231d2a8bd9e0e3824ca9da85d67
      size: 185669
    - path: results/weight_stores/weight_store.en.wmt17.bert-base-multilingual-cased.pickle
      md5: 5fe385307672f0e00cfc37ad940d676c
      size: 501819
    - path: results/weight_stores/weight_store.en.wmt17.roberta-large-mnli.pickle
      md5: 0631df416cdac44b43e0f306fa54e95a
      size: 661635
    - path: results/weight_stores/weight_store.et.wmt17.bert-base-multilingual-cased.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.et.wmt17.roberta-large-mnli.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.fi.wmt17.bert-base-multilingual-cased.pickle
      md5: 054063b16d9ad2925675c21c681c1717
      size: 220481
    - path: results/weight_stores/weight_store.fi.wmt17.roberta-large-mnli.pickle
      md5: 57ff52d08d2d43566c6ba21480b01077
      size: 135501
    - path: results/weight_stores/weight_store.ru.wmt17.bert-base-multilingual-cased.pickle
      md5: f8393ff5e498ff07158978920d6c2701
      size: 281390
    - path: results/weight_stores/weight_store.ru.wmt17.roberta-large-mnli.pickle
      md5: c42e72dee7164f5394a25839f943f7f2
      size: 30211
    - path: results/weight_stores/weight_store.tr.wmt17.bert-base-multilingual-cased.pickle
      md5: 4b1feff650d96ed186f9299867e9a6a7
      size: 155562
    - path: results/weight_stores/weight_store.tr.wmt17.roberta-large-mnli.pickle
      md5: 427ec8fd3b5d233cb20b4cb12b589a9c
      size: 103643
    - path: results/weight_stores/weight_store.zh.wmt17.bert-base-multilingual-cased.pickle
      md5: 5c59bdfdd43f12e024532e40011b8630
      size: 97301
    - path: results/weight_stores/weight_store.zh.wmt17.roberta-large-mnli.pickle
      md5: a227ab5832c20b807bde09da4c1c1363
      size: 29881
    - path: scripts/models/performance_test.py
      md5: 4353a6c9bdb72e0e6b5f077573eb9cc6
      size: 1518
    - path: src/models/model.py
      md5: 10791fbd72e96d721675c5b46c480680
      size: 11542
    params:
      params.yaml:
        model.distance: emd
        model.nit: 100
        model.reg1: 0.015
        model.reg2: None
        model.temporal_type: None
        model.weight_dist: idf
    outs:
    - path: results/wmt18/correlations/scores.cs-en.json
      md5: 4c38fbf6ce1ac02e921738b4683fa5c1
      size: 518
    - path: results/wmt18/correlations/scores.de-en.json
      md5: e4100ef9960b9e846c3f12e01dbf4b7b
      size: 549
    - path: results/wmt18/correlations/scores.en-cs.json
      md5: ba8c9324bb77a10ffc9c851ca2a8bda4
      size: 511
    - path: results/wmt18/correlations/scores.en-de.json
      md5: 787867a2a15377350c1bea7c88916cf4
      size: 531
    - path: results/wmt18/correlations/scores.en-et.json
      md5: 224b76c67317b3f39d12e256d9bbb7a1
      size: 544
    - path: results/wmt18/correlations/scores.en-fi.json
      md5: b0fd1677f902e6ce100b2dd2cc9bf0a8
      size: 517
    - path: results/wmt18/correlations/scores.en-ru.json
      md5: c7a9173c8de18984fe24d5cef2d8eb41
      size: 541
    - path: results/wmt18/correlations/scores.en-tr.json
      md5: 7e5d7239119b5073d2b448c8a56d40e3
      size: 516
    - path: results/wmt18/correlations/scores.en-zh.json
      md5: abc5335b5c53601d740208f59da64aa9
      size: 511
    - path: results/wmt18/correlations/scores.et-en.json
      md5: a7d3a8a9d5ac6f9d86edfb4287b73f43
      size: 516
    - path: results/wmt18/correlations/scores.fi-en.json
      md5: df4f19373a312ff6c627793df49eff63
      size: 529
    - path: results/wmt18/correlations/scores.ru-en.json
      md5: e8cc16b0bb54aa41663d29a35e8b92eb
      size: 543
    - path: results/wmt18/correlations/scores.tr-en.json
      md5: 88d19c21dc2e1937736b5824590ba299
      size: 517
    - path: results/wmt18/correlations/scores.zh-en.json
      md5: b0d6b0022972d8147132f65a24aa3320
      size: 543
  evaluate:
    cmd: python scripts/models/performance_eval.py wmt18
    deps:
    - path: results/wmt18/correlations/scores.cs-en.json
      md5: 4c38fbf6ce1ac02e921738b4683fa5c1
      size: 518
    - path: results/wmt18/correlations/scores.de-en.json
      md5: e4100ef9960b9e846c3f12e01dbf4b7b
      size: 549
    - path: results/wmt18/correlations/scores.en-cs.json
      md5: ba8c9324bb77a10ffc9c851ca2a8bda4
      size: 511
    - path: results/wmt18/correlations/scores.en-de.json
      md5: 787867a2a15377350c1bea7c88916cf4
      size: 531
    - path: results/wmt18/correlations/scores.en-et.json
      md5: 224b76c67317b3f39d12e256d9bbb7a1
      size: 544
    - path: results/wmt18/correlations/scores.en-fi.json
      md5: b0fd1677f902e6ce100b2dd2cc9bf0a8
      size: 517
    - path: results/wmt18/correlations/scores.en-ru.json
      md5: c7a9173c8de18984fe24d5cef2d8eb41
      size: 541
    - path: results/wmt18/correlations/scores.en-tr.json
      md5: 7e5d7239119b5073d2b448c8a56d40e3
      size: 516
    - path: results/wmt18/correlations/scores.en-zh.json
      md5: abc5335b5c53601d740208f59da64aa9
      size: 511
    - path: results/wmt18/correlations/scores.et-en.json
      md5: a7d3a8a9d5ac6f9d86edfb4287b73f43
      size: 516
    - path: results/wmt18/correlations/scores.fi-en.json
      md5: df4f19373a312ff6c627793df49eff63
      size: 529
    - path: results/wmt18/correlations/scores.ru-en.json
      md5: e8cc16b0bb54aa41663d29a35e8b92eb
      size: 543
    - path: results/wmt18/correlations/scores.tr-en.json
      md5: 88d19c21dc2e1937736b5824590ba299
      size: 517
    - path: results/wmt18/correlations/scores.zh-en.json
      md5: b0d6b0022972d8147132f65a24aa3320
      size: 543
    - path: scripts/models/performance_eval.py
      md5: 59fd09c59ccbd45f22b77bdfcfd548ce
      size: 2094
    outs:
    - path: results/wmt18/correlations/scores/eval.wmt18.cs-en.json
      md5: baa09676b0e1bbee33483c35037f3340
      size: 103
    - path: results/wmt18/correlations/scores/eval.wmt18.de-en.json
      md5: 549a769a6732bef26fbdb0b56d174fbe
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.en-cs.json
      md5: ab61170ffbe8180af29a2359c172975a
      size: 105
    - path: results/wmt18/correlations/scores/eval.wmt18.en-de.json
      md5: 54770c09fdf2ea01a98bbb50e7a08a18
      size: 105
    - path: results/wmt18/correlations/scores/eval.wmt18.en-et.json
      md5: 99d983606f700a6b0ff0aec826efa903
      size: 101
    - path: results/wmt18/correlations/scores/eval.wmt18.en-fi.json
      md5: 84afbdb7b9fb1a90ead811580372a03e
      size: 87
    - path: results/wmt18/correlations/scores/eval.wmt18.en-ru.json
      md5: 819717e3051e6ac4b63a525ad0512460
      size: 105
    - path: results/wmt18/correlations/scores/eval.wmt18.en-tr.json
      md5: f77f3338d8fe599e4202ac97e8579ad4
      size: 88
    - path: results/wmt18/correlations/scores/eval.wmt18.en-zh.json
      md5: 2448b20a698e1e20e5a8f6aed792c84a
      size: 105
    - path: results/wmt18/correlations/scores/eval.wmt18.et-en.json
      md5: 34df17084cda5aeedef54a6bb5b42dad
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.fi-en.json
      md5: ef9c05fbbc247a87dba509b540ae80a5
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.ru-en.json
      md5: 65b37786d1c402f26a800f41857aa2cd
      size: 102
    - path: results/wmt18/correlations/scores/eval.wmt18.tr-en.json
      md5: 8e28039f247bd0f498ceff030ea39501
      size: 86
    - path: results/wmt18/correlations/scores/eval.wmt18.zh-en.json
      md5: eb01fc0e86e40b57f55413b39f4f4b9f
      size: 101
  data_prep:
    cmd: python scripts/models/compute_weights.py en,cs,de,et,fi,ru,tr,zh
    deps:
    - path: scripts/models/compute_weights.py
      md5: d9154ddad9c15a57404204881f44013f
      size: 1924
    outs:
    - path: results/weight_stores/weight_store.cs.wmt17.bert-base-multilingual-cased.pickle
      md5: de28f2be923c93c8f4a6bda5107ffc16
      size: 231663
    - path: results/weight_stores/weight_store.cs.wmt17.roberta-large-mnli.pickle
      md5: 8ae9fd1bffbc960085cc2be2c620ae98
      size: 139698
    - path: results/weight_stores/weight_store.de.wmt17.bert-base-multilingual-cased.pickle
      md5: 590755a920545336ce492d2ab30a2450
      size: 307909
    - path: results/weight_stores/weight_store.de.wmt17.roberta-large-mnli.pickle
      md5: 9fbb9231d2a8bd9e0e3824ca9da85d67
      size: 185669
    - path: results/weight_stores/weight_store.en.wmt17.bert-base-multilingual-cased.pickle
      md5: 5fe385307672f0e00cfc37ad940d676c
      size: 501819
    - path: results/weight_stores/weight_store.en.wmt17.roberta-large-mnli.pickle
      md5: 0631df416cdac44b43e0f306fa54e95a
      size: 661635
    - path: results/weight_stores/weight_store.et.wmt17.bert-base-multilingual-cased.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.et.wmt17.roberta-large-mnli.pickle
      md5: 6436727076e403436f3287a147c11e6c
      size: 168
    - path: results/weight_stores/weight_store.fi.wmt17.bert-base-multilingual-cased.pickle
      md5: 054063b16d9ad2925675c21c681c1717
      size: 220481
    - path: results/weight_stores/weight_store.fi.wmt17.roberta-large-mnli.pickle
      md5: 57ff52d08d2d43566c6ba21480b01077
      size: 135501
    - path: results/weight_stores/weight_store.ru.wmt17.bert-base-multilingual-cased.pickle
      md5: f8393ff5e498ff07158978920d6c2701
      size: 281390
    - path: results/weight_stores/weight_store.ru.wmt17.roberta-large-mnli.pickle
      md5: c42e72dee7164f5394a25839f943f7f2
      size: 30211
    - path: results/weight_stores/weight_store.tr.wmt17.bert-base-multilingual-cased.pickle
      md5: 4b1feff650d96ed186f9299867e9a6a7
      size: 155562
    - path: results/weight_stores/weight_store.tr.wmt17.roberta-large-mnli.pickle
      md5: 427ec8fd3b5d233cb20b4cb12b589a9c
      size: 103643
    - path: results/weight_stores/weight_store.zh.wmt17.bert-base-multilingual-cased.pickle
      md5: 5c59bdfdd43f12e024532e40011b8630
      size: 97301
    - path: results/weight_stores/weight_store.zh.wmt17.roberta-large-mnli.pickle
      md5: a227ab5832c20b807bde09da4c1c1363
      size: 29881
